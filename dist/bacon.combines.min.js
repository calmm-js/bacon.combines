!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("baconjs"),require("infestines")):"function"==typeof define&&define.amd?define(["exports","baconjs","infestines"],e):e((n.bacon=n.bacon||{},n.bacon.combines={}),n.Bacon,n.I)}(this,function(n,e,t){"use strict";function r(n){for(var e=0,t=0,r=n.length;t<r;++t)e+=u(n[t]);return e}function i(n){var e=0;for(var t in n)e+=u(n[t]);return e}function a(n){return t.isArray(n)?r(n):t.isObject(n)?i(n):0}function u(n){return n instanceof o?1:a(n)}function c(n){if(!(n instanceof Array))return n;var e=n.length-1,t=n[e];return t instanceof Function?t.apply(void 0,n.slice(0,e)):n}var o=(e=e&&e.hasOwnProperty("default")?e.default:e).Observable,f=function(n){if(t.isArray(n)){var e=n[n.length-1];if(e instanceof Function)return e.apply(null,n.slice(0,-1))}return n},s=function(n){return e.combineTemplate(n).map(f).skipDuplicates(t.identicalU)},l=function(n){return function(e){return e instanceof o?e.map(n).skipDuplicates(t.identicalU):0===a(e)?n(e):s([e,n])}};n.lift1Shallow=function(n){return function(e){return e instanceof o?e.map(n).skipDuplicates(t.identicalU):n(e)}},n.lift1=l,n.lift=function(n){var e=n.length;switch(e){case 0:return n;case 1:return l(n);default:return t.arityN(e,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;++i)t[i]=arguments[i];return 0===r(t)?n.apply(null,t):(t.push(n),s(t))})}},n.default=function(){for(var n=arguments.length,e=Array(n),i=0;i<n;i++)e[i]=arguments[i];switch(r(e)){case 0:return c(e);case 1:return 2===e.length&&e[0]instanceof o&&e[1]instanceof Function?e[0].map(e[1]).skipDuplicates(t.identicalU):s(e);default:return s(e)}},Object.defineProperty(n,"__esModule",{value:!0})});
